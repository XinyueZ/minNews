<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules">
	<target name="build">
		<!--Tasks-->
		<copy file="libs/android-support-v4.jar"
		      todir="libs/ActionBar/library/libs/"
		      overwrite="true"/>
		<echo>android-support-v4.jar -> libs/ActionBar/library/libs/</echo>
		<copy file="libs/android-support-v4.jar"
		      todir="submodules/Android-ViewPagerIndicator/library/libs/"
		      overwrite="true"/>
		<echo>android-support-v4.jar -> submodules/Android-ViewPagerIndicator/library/libs/</echo>

		<!--Application specialized tasks-->
		<replaceregexp match="../../../your/path/to/actionbarsherlock"
		               replace='../../../../libs/ActionBar/library'>
			<fileset dir="submodules/ActionBar-PullToRefresh/extras/actionbarsherlock">
				<include name="project.properties"/>
			</fileset>
		</replaceregexp>
		<echo>Tried replacing location of ActionBar.</echo>
		<antcall target="debug"/>

		<!--After building process.-->
		<echo>After building.</echo>
		<echo message="Build number: ${build_number}"/>

		<!--Find debug build-->
		<condition property="debug.present">
			<available file="bin/${job_name}-debug.apk"  />
			<echo message="Output: bin/${job_name}-debug.apk"/>
		</condition>
		<antcall target="op.debug"/>

		<!--Find release build-->
		<condition property="release.present">
			<available file="bin/${job_name}-release.apk"  />
			<echo message="Output: bin/${job_name}-release.apk"/>
		</condition>
		<antcall target="op.release"/>
	</target>

	<target name="op.debug" if="debug.present">
		<echo>Find debug build.</echo>
		<copyfile src="bin/${job_name}-debug.apk" dest="bin/${job_name}-${build_number}-debug.apk"/>
	</target>

	<target name="op.release" if="release.present">
		<echo>Find release build.</echo>
		<copyfile src="bin/${job_name}-release.apk" dest="bin/${job_name}-${build_number}-release.apk"/>
	</target>
</project>